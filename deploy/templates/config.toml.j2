# BioMoQA RAG Configuration
# Generated by Ansible - edit group_vars/all.yml to change values

[server]
host = "{{ biomoqa_host }}"
port = {{ biomoqa_port }}
workers = {{ biomoqa_workers }}
log_level = "{{ biomoqa_log_level }}"

[model]
# Inference mode: "gpu", "gpu_small", or "cpu"
mode = "{{ biomoqa_mode }}"

# Model size for CPU mode: "0.5b", "1.5b", "3b", "7b"
size = "{{ biomoqa_model_size }}"

# GPU settings
gpu_memory_utilization = {{ biomoqa_gpu_memory_utilization }}
{% if biomoqa_quantization %}
quantization = "{{ biomoqa_quantization }}"
{% else %}
# quantization = "fp8"
{% endif %}

[generation]
max_tokens = {{ biomoqa_max_tokens }}
temperature = {{ biomoqa_temperature }}

[retrieval]
retrieval_n = {{ biomoqa_retrieval_n }}
use_smart_retrieval = {{ biomoqa_use_smart_retrieval | lower }}
hybrid_alpha = {{ biomoqa_hybrid_alpha }}

[reranking]
enabled = {{ biomoqa_reranking_enabled | lower }}
model = "{{ biomoqa_reranker_model }}"
top_k = {{ biomoqa_rerank_top_k }}

[relevance_filter]
enabled = {{ biomoqa_relevance_filter_enabled | lower }}
min_overlap = {{ biomoqa_min_overlap }}
final_n = {{ biomoqa_final_n }}

[context]
max_abstract_length = {{ biomoqa_max_abstract_length }}
truncate_abstracts = {{ biomoqa_truncate_abstracts | lower }}

[data]
faiss_index = "data/faiss_index.bin"
documents = "data/documents.pkl"
